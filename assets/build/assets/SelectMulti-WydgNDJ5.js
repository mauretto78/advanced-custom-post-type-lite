import{j as e,u as N,l as T}from"./fields-B4O9Q4Yk.js";import{a as b,R as S}from"./vendor-BwziPlmK.js";import{P as a,af as y}from"./index-DIgvZvNa.js";import{g as P}from"./index.esm-Czmjla35.js";const E=({placeholder:u,id:n,disabled:f=!1,defaultValue:h,description:R,values:C,validate:V,register:w,errors:O,setValue:x,clearErrors:g,maxItems:k})=>{const o=P(O,n),[i,j]=b.useState(h&&y(h)?h:[]),[p,d]=b.useState(!1),[m,A]=b.useState(""),D=()=>{try{return i&&y(i)&&i.length>0?e.jsx(S.Fragment,{children:i&&y(i)&&i.map(s=>{const r=()=>{const t=C.filter(l=>l.options?l.options.filter(v=>v.value.toString()===s.toString()).length===1:l.value===s);if(t.length===1){if(t[0].options){const l=t[0].options.filter(c=>c.value.toString()===s.toString());if(l.length===1)return l[0].label}return t[0].label}return s};return e.jsxs("span",{className:"item",children:[e.jsx("span",{className:"label",children:r()}),e.jsx("a",{href:"#",className:"close-item",onClick:t=>{t.preventDefault(),t.stopPropagation(),f||j(l=>{const c=l.filter(v=>v!==s);return x(n,c),d(!1),o&&g(n),c})},children:"×"})]})})}):e.jsx("span",{children:u||N("Select items")})}catch{return e.jsx("span",{children:u||N("Select items")})}},F=()=>e.jsx("a",{href:"#",className:"close",onClick:s=>{s.preventDefault(),s.stopPropagation(),f||j(r=>(x(n,[]),g(n),d(!1),[]))},children:"×"}),I=()=>k&&i.length>=k?null:e.jsxs("div",{className:"select-items",children:[e.jsx("div",{className:"search-box",children:e.jsx("input",{type:"text",className:"form-control",placeholder:N("Filter items"),defaultValue:m,onChange:s=>{A(s.target.value)}})}),e.jsx("ul",{tabIndex:0,className:"select-items-list",children:q(C)})]}),q=s=>s.filter(r=>m!==""&&r.value&&r.label?T(r.value,m)||T(r.label,m):!0).filter(r=>r.value?i.findIndex(t=>t===r.value)===-1:!0).map((r,t)=>r.options?e.jsxs(S.Fragment,{children:[e.jsx("li",{className:"optgroup",children:r.label}),q(r.options)]}):e.jsx("li",{tabIndex:t+1,className:"select-item",onClick:()=>{j(l=>{const c=[...l,r.value];return x(n,c),d(!p),o&&g(n),c})},children:r.label},t));return e.jsxs(S.Fragment,{children:[e.jsxs("div",{className:"acpt-select-multi",children:[e.jsx("input",{id:n,name:n,type:"hidden",defaultValue:i,...w(n,V)}),e.jsxs("div",{className:`placeholder ${o?"has-errors":""} ${f?"disabled":""}`,onClick:()=>{f||d(!p)},children:[e.jsx("div",{className:"items",children:D()}),!p&&i.length>0&&F(),e.jsx("div",{className:"divider"}),e.jsx("div",{className:"caret"})]}),p&&I()]}),o&&e.jsx("div",{className:"invalid-feedback",children:o.message}),R&&e.jsx("div",{className:"form-description",children:R})]})};E.propTypes={id:a.string.isRequired,placeholder:a.string,defaultValue:a.array,description:a.string,disabled:a.bool,values:a.array.isRequired,validate:a.func,register:a.func.isRequired,setValue:a.func.isRequired,clearErrors:a.func.isRequired,errors:a.array.isRequired,maxItems:a.number};export{E as S};
