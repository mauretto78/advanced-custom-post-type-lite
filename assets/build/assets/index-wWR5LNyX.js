import{j as e,u as t}from"./fields-lEbqKXfy.js";import{a as v,R as A,u as Se,d as Re}from"./vendor-Bd2ZL6QG.js";import{u as R,c as L,b as w,g as ee,a as Te,F as we}from"./index.esm-VK9FF9DZ.js";import{u as S,B as D,s as y,ag as Fe,ah as se,P as j,ai as Ee,I as E,w as ke,E as V,aj as te,A as Ae,b as k,ak as le,al as ae,am as ne,an as $,y as B,z as qe,ao as Ie,ap as Oe,a3 as Le,aq as Me,aa as Pe,m as Ve,k as $e,ar as Ue,as as _e,L as Be,i as We,at as Ge}from"./index-Bq-K6t3F.js";import{n as P,b as U,u as Z,B as Ye,L as He}from"./Layout-Dr3--xmY.js";import{M as _}from"./index-wemFkT8q.js";import{P as ze}from"./index-C4649-ab.js";import{I as W}from"./InputHidden-CRiVGG82.js";import{u as ie}from"./index-BixwEkkR.js";import{u as G,C as Y,S as re,M as de,B as Je,L as M,a as Xe}from"./index-BMuz5Icn.js";import{S as oe}from"./Select-CLGPt3Fs.js";import{I}from"./Input-DoSg7EmL.js";import{T as O}from"./index-BpFxbjGR.js";const Ke=()=>{const s=S(),{setValue:o}=R(),[c,i]=v.useState(!1),a=[e.jsx(D,{style:y.SUCCESS,onClick:u=>{u.preventDefault(),s(Fe()),s(se()),o("fields",[]),i(!c)},children:t("Yes")}),e.jsx(D,{style:y.DANGER,onClick:u=>{u.preventDefault(),i(!c)},children:t("No")})];return e.jsxs(A.Fragment,{children:[e.jsx(_,{title:t("Confirm deleting all"),visible:c,buttons:a,children:t("Are you sure?")}),e.jsx(D,{style:y.DANGER,onClick:u=>{u.preventDefault(),i(!c)},children:t("Delete all")})]})},Qe="Checkbox",Ze="Color",es="Date",ss="DateTime",ts="Email",ls="Number",as="Phone",ns="PostObject",is="PostObjectMulti",ce="Radio",ue="Select",me="SelectMulti",rs="TermObject",ds="TermObjectMulti",H="Text",os="Textarea",cs="Time",us="Url",ms="User",hs="UserMulti",he=[{value:H,label:"Text"},{value:Ze,label:"Color"},{value:es,label:"Date"},{value:ss,label:"DateTime"},{value:ts,label:"Email"},{value:ls,label:"Number"},{value:as,label:"Phone"},{value:cs,label:"Time"},{value:us,label:"Url"},{value:os,label:"Textarea"},{value:ue,label:"Select"},{value:me,label:"Select (Multiple)"},{value:Qe,label:"Checkbox"},{value:ce,label:"Radio"},{value:ns,label:"Post object"},{value:is,label:"Post object (Multiple)"},{value:rs,label:"Term object"},{value:ds,label:"Term object (Multiple)"},{value:ms,label:"User"},{value:hs,label:"User (Multiple)"}],pe=({fieldIndex:s,optionIndex:o})=>{const c=S(),i=()=>`fields.${s}.options`,{control:a}=R(),{remove:u}=L({control:a,name:i()}),[f,x]=v.useState(!1),n=[e.jsx(D,{style:y.SUCCESS,onClick:r=>{r.preventDefault(),c(Ee({fieldIndex:s,optionIndex:o})),u(o),x(!f)},children:t("Yes")}),e.jsx(D,{style:y.DANGER,onClick:r=>{r.preventDefault(),x(!f)},children:t("No")})];return e.jsxs("span",{children:[e.jsx(_,{title:t("Confirm deleting option"),visible:f,buttons:n,children:t("Are you sure?")}),e.jsx("a",{href:"#",onClick:r=>{r.preventDefault(),x(!f)},children:e.jsx(O,{icon:!1,tip:t("Delete"),label:e.jsx(E,{icon:"bx-trash",width:18,color:"#F94144"})})})]})};pe.propTypes={fieldIndex:j.number.isRequired,optionIndex:j.number.isRequired};const xe=v.memo(({index:s,fieldIndex:o,fieldId:c,option:i})=>{const a=b=>`fields.${o}.options.${s}.${b}`,{register:u,formState:{errors:f},control:x,setValue:n}=R(),r=w({control:x,name:a("value")}),h=w({control:x,name:a("label")}),{attributes:N,listeners:m,setNodeRef:l,transform:d}=G({id:i.id}),p={transform:Y.Translate.toString(d)},[C,T]=v.useState(i.label===i.value),F=()=>r||(i.value?i.value:null),g=()=>h||(i.label?i.label:null);return e.jsxs("div",{className:"i-flex-center s-8",style:p,ref:l,children:[e.jsx(W,{id:a("id"),value:i.id,register:u}),e.jsx("span",{className:"cursor-move top-2 handle",...N,...m,children:e.jsx(E,{icon:"bx:dots-vertical-rounded",color:"#777",width:18})}),e.jsxs("span",{className:"i-flex-center s-24 w-100",children:[e.jsx("span",{className:"w-100",children:e.jsx(I,{id:a("label"),register:u,errors:f,defaultValue:g(),onChangeCapture:b=>{C&&n(a("value"),b.target.value)},onClick:b=>{i.label&&b.target.value==="option"&&n(a("label"),null)},validate:{required:t("This field is mandatory"),maxLength:{value:255,message:"max length is 255"}}})}),e.jsx("span",{children:e.jsx("button",{type:"button",className:`acpt-btn-switch ${C?"active":""}`,onClick:b=>{b.preventDefault(),T(!C)},children:e.jsx(E,{icon:"bx:bx-link",width:"18px"})})}),e.jsx("span",{className:"w-100",children:e.jsx(I,{id:a("value"),register:u,errors:f,defaultValue:F(),onChangeCapture:b=>{C&&n(a("label"),b.target.value)},onClick:b=>{i.value&&b.target.value==="option"&&n(a("value"),null)},validate:{required:t("This field is mandatory"),maxLength:{value:255,message:"max length is 255"}}})}),e.jsx(pe,{fieldIndex:o,optionIndex:s})]})]})});xe.propTypes={fieldId:j.string.isRequired,index:j.number.isRequired,fieldIndex:j.number.isRequired,option:j.object.isRequired};const fe=({fieldId:s,fieldIndex:o})=>{const c=S(),[i,a]=v.useState(!1),[u,f]=v.useState(null),[x,n]=v.useState(null),[r,h]=v.useState(!1);v.useEffect(()=>{r&&(a(!0),ke("fetchDatasetsAction",{}).then(l=>{let d=[{value:null,label:t("Select"),items:[]}];l.records&&l.records.map(p=>{d.push({value:p.id,label:p.label?p.label:p.name,items:p.items?p.items:[]})}),f(d),a(!1)}).catch(l=>{console.error(l.message),a(!1)}))},[r]);const N=()=>{const l=u.filter(p=>p.value===x);if(l.length!==1)return;l[0].items.map(p=>{const C={id:V(),fieldId:s,label:p.label,value:p.value};c(te({fieldIndex:o,option:C}))}),P.success(t("Dataset loaded correctly")),h(!r)},m=[e.jsx(D,{style:y.PRIMARY,disabled:x===null,onClick:l=>{l.preventDefault(),N()},children:t("Load dataset")}),e.jsx(D,{style:y.DANGER,onClick:l=>{l.preventDefault(),h(!r)},children:t("Close")})];return e.jsxs(A.Fragment,{children:[e.jsx(_,{title:t("Load dataset"),visible:r,padding:0,buttons:m,children:i?e.jsx("div",{className:"p-24",children:t("Loading...")}):e.jsx("div",{className:"p-24",children:e.jsx("select",{id:"dataset",className:"form-control default",onChangeCapture:l=>n(l.target.value),children:u&&u.map(l=>e.jsx("option",{value:l.value,children:l.label}))})})}),e.jsx("a",{href:"#",onClick:l=>{l.preventDefault(),h(!r)},children:t("Load dataset")})]})};fe.propTypes={fieldId:j.string.isRequired,fieldIndex:j.number.isRequired};const je=({fieldId:s,fieldIndex:o,options:c})=>{const i=S(),a=()=>`fields.${o}.options`,{control:u}=R(),{move:f}=L({control:u,name:a()}),x=r=>{const{active:h,over:N}=r;if(h.id===N.id)return;const m=c.findIndex(d=>d.id===h.id),l=c.findIndex(d=>d.id===N.id);f(m,l)},n=()=>{const r={id:V(),fieldId:s,label:"option",value:"option"};i(te({fieldIndex:o,option:r}))};return e.jsx("div",{children:e.jsxs("fieldset",{className:"acpt-fieldset",children:[e.jsx("legend",{children:t("Option list")}),c&&c.length>0?e.jsx(re,{onDragEnd:x,items:c,children:e.jsx("div",{className:"flex-column s-24",children:c&&c.map((r,h)=>e.jsx(xe,{index:h,fieldIndex:o,fieldId:s,option:r}))})}):e.jsx(Ae,{style:y.WARNING,children:t('No options already created. Create the first one now by clicking the button "Add option"!')}),e.jsxs("div",{className:"i-flex-center s-8 mt-24",children:[e.jsx("a",{href:"#",onClick:r=>{r.preventDefault(),n()},children:t("Add option")}),e.jsx(fe,{fieldId:s,fieldIndex:o})]})]})})};je.propTypes={fieldId:j.string.isRequired,fieldIndex:j.number.isRequired,options:j.array.isRequired};const z=({element:s})=>{const o=S(),{selectedElements:c}=k(a=>a.productDataFieldsState),i=()=>c.filter(u=>u.id===s.id).length>0;return e.jsx(O,{label:e.jsxs("label",{className:"checkbox",htmlFor:`select-${s.id}`,style:{top:"3px"},children:[e.jsx("input",{id:`select-${s.id}`,type:"checkbox",checked:i(),onChange:a=>{o(le({element:s,selected:a.target.checked}))}}),e.jsx("span",{})]}),icon:!1,tip:t(i()?"Deselect this element":"Select this element")})};z.propTypes={element:j.object.isRequired};const be=({field:s,index:o})=>{const c=S(),{control:i}=R(),{remove:a}=L({control:i,name:"fields"}),[u,f]=v.useState(!1),x=[e.jsx(D,{style:y.SUCCESS,onClick:n=>{n.preventDefault(),c(ae({field:s})),a(o),f(!u)},children:t("Yes")}),e.jsx(D,{style:y.DANGER,onClick:n=>{n.preventDefault(),f(!u)},children:t("No")})];return e.jsxs(A.Fragment,{children:[e.jsx(_,{title:t("Confirm deleting option"),visible:u,buttons:x,children:t("Are you sure?")}),e.jsx("a",{href:"#",onClick:n=>{n.preventDefault(),f(!u)},children:e.jsx(E,{icon:"bx-trash",width:18,color:"#F94144"})})]})};be.propTypes={index:j.number.isRequired,field:j.object.isRequired};const J=({field:s,index:o})=>{const c=S(),{closedElements:i}=k(n=>n.productDataFieldsState),{control:a}=R(),{append:u}=L({control:a,name:"fields"}),f=()=>i.filter(r=>r===s.id).length===1,x=()=>{qe(s.id),f()?c(Ie({id:s.id})):c(Oe({id:s.id}))};return e.jsxs("span",{className:"i-flex-center s-8",children:[e.jsx(O,{label:e.jsx("a",{href:"#",onClick:n=>{n.preventDefault();const r=ne(s);c($({field:r})),u(r),B(1).then(()=>{U(r.id)})},children:e.jsx(E,{icon:"bx:duplicate",width:18})}),tip:t("Duplicate this meta field"),icon:!1}),e.jsx(O,{label:e.jsx(be,{index:o,field:s}),tip:t("Delete this meta field"),icon:!1}),e.jsx(O,{label:e.jsx("a",{href:"#",onClick:n=>{n.preventDefault(),x()},children:e.jsx(E,{icon:"bx:expand-alt",width:18})}),tip:t("Hide/show this meta field"),icon:!1})]})};J.propTypes={index:j.number.isRequired,field:j.object.isRequired};const ve=({field:s,index:o})=>{const{attributes:c,listeners:i,setNodeRef:a,isDragging:u,transform:f}=G({id:s.id}),x={transform:Y.Translate.toString(f)};S(),k(g=>g.productDataFieldsState);const{register:n,formState:{errors:r},control:h,setValue:N}=R(),m=g=>`fields.${o}.${g}`,l=w({control:h,name:m("name")}),d=w({control:h,name:m("type")}),p=w({control:h,name:m("isRequired")}),C=()=>{const g=m("name"),b=ee(r,g);return b?e.jsx("span",{className:"invalid-feedback",children:t(b.message)}):l||s.name},T=()=>d||s.type,F=g=>g===ue||g===me||g===ce;return e.jsx("tr",{id:s.id,ref:a,style:x,className:`bg-white ${u?"b-rounded z-100 with-drop-shadow":""}`,children:e.jsxs("td",{style:{background:"#eff6fc3b"},className:"with-active-border",colSpan:4,children:[e.jsx(W,{id:m("id"),value:s.id,register:n}),e.jsx("div",{className:"mb-24",children:e.jsxs("div",{className:"flex-between s-8 for-xs",children:[e.jsxs("span",{className:"i-flex-center s-8",children:[e.jsx("span",{className:"cursor-move top-2 handle",...c,...i,children:e.jsx(E,{icon:"bx:dots-vertical-rounded",color:"#777",width:18})}),e.jsx(z,{element:{id:s.id}}),e.jsx("h3",{children:C()}),e.jsx("span",{className:"color-gray",children:e.jsx(de,{fieldType:T(),css:"top-2"})}),e.jsx("span",{className:"i-flex-center s-8",children:e.jsx(O,{label:e.jsx(A.Fragment,{children:e.jsx(Je,{control:h,defaultValue:typeof p=="boolean"?p:s.isRequired,errors:r,icon:"foundation:asterisk",id:m("isRequired")})}),tip:t("Field required"),icon:!1})})]}),e.jsx(J,{field:s,index:o})]})}),e.jsx("div",{className:"bg-white with-border b-rounded p-24",children:e.jsxs("div",{className:"flex-column s-24",children:[e.jsxs("div",{className:"container align-end",children:[e.jsxs("div",{className:"col-6",children:[e.jsx(M,{isRequired:!0,id:m("name"),label:t("Name")}),e.jsx(I,{id:m("name"),register:n,errors:r,placeholder:t("Name"),defaultValue:s.name,onClick:g=>{s.name&&g.target.value==="field"&&N(m("name"),null)},validate:{required:t("This field is mandatory"),maxLength:{value:255,message:"max length is 255"}}})]}),e.jsxs("div",{className:"col-6",children:[e.jsx(M,{isRequired:!0,id:m("type"),label:t("Field type")}),e.jsx(oe,{register:n,errors:r,id:m("type"),values:he})]})]}),e.jsxs("div",{className:"container align-end",children:[e.jsxs("div",{className:"col-6",children:[e.jsx(M,{isRequired:!1,id:m("defaultValue"),label:t("Default value")}),e.jsx(I,{id:m("defaultValue"),register:n,errors:r,placeholder:t("Default value"),defaultValue:s.defaultValue,validate:{maxLength:{value:255,message:"max length is 255"}}})]}),e.jsxs("div",{className:"col-6",children:[e.jsx(M,{isRequired:!1,id:m("description"),label:t("A brief description")}),e.jsx(I,{id:m("description"),register:n,errors:r,placeholder:t("A brief description"),defaultValue:s.description,validate:{maxLength:{value:255,message:"max length is 255"}}})]})]}),F(T())&&e.jsx(je,{fieldId:s.id,fieldIndex:o,options:s.options?s.options:[]})]})})]})})};ve.propTypes={index:j.number.isRequired,field:j.object.isRequired};const ge=({field:s,index:o})=>{const{attributes:c,listeners:i,setNodeRef:a,isDragging:u,transform:f}=G({id:s.id}),x={transform:Y.Translate.toString(f)};S(),k(q=>q.productDataFieldsState);const{register:n,formState:{errors:r},control:h,setValue:N}=R(),m=q=>`fields.${o}.${q}`,l=w({control:h,name:m("name")}),d=w({control:h,name:m("type")});w({control:h,name:m("isRequired")});const p=()=>{const q=m("name"),Q=ee(r,q);return Q?e.jsx("span",{className:"invalid-feedback",children:t(Q.message)}):l||s.name},C=()=>d||s.type,[T,F]=v.useState(!1),[g,b]=v.useState(!1),X=v.useRef(),K=v.useRef();return Z([X],()=>{b(!1)}),Z([K],()=>{F(!1)}),e.jsx(A.Fragment,{children:e.jsxs("tr",{id:s.id,ref:a,style:x,className:`bg-white b-rounded ${u?"z-100 with-drop-shadow":""}`,children:[e.jsx("td",{children:e.jsxs("span",{className:"i-flex-center s-8",children:[e.jsx("span",{className:"cursor-move handle top-2",...c,...i,children:e.jsx(E,{icon:"bx:dots-vertical-rounded",color:"#777",width:18})}),e.jsx(z,{element:{id:s.id}})]})}),e.jsx("td",{children:T?e.jsx("div",{ref:K,style:{maxWidth:"200px"},children:e.jsx(I,{id:m("name"),register:n,errors:r,placeholder:t("Name"),defaultValue:s.name,onClick:q=>{s.name&&q.target.value==="field"&&N(m("name"),null)},validate:{required:t("This field is mandatory"),maxLength:{value:255,message:"max length is 255"}}})}):e.jsx("div",{className:"i-flex-center s-8 cursor-pointer",onClick:()=>{window.innerWidth>=960&&F(!T)},children:p()})}),e.jsx("td",{children:g?e.jsx("div",{ref:X,style:{maxWidth:"200px"},children:e.jsx(oe,{register:n,id:m("type"),errors:r,defaultValue:s.type,values:he})}):e.jsx("div",{className:"i-flex-center s-8 cursor-pointer",onClick:()=>{window.innerWidth>=960&&b(!g)},children:e.jsx(de,{fieldType:C(),css:"with-border b-rounded p-8"})})}),e.jsx("td",{children:e.jsx(J,{field:s,index:o})})]})})};ge.propTypes={index:j.number.isRequired,field:j.object.isRequired};const Ne=({field:s,index:o})=>{const{closedElements:c}=k(a=>a.productDataFieldsState);return c.filter(u=>u===s.id).length===1?e.jsx(ge,{field:s,index:o}):e.jsx(ve,{field:s,index:o})};Ne.propTypes={index:j.number.isRequired,field:j.object.isRequired};const ps=()=>{const s=S(),{selectedElements:o}=k(h=>h.productDataFieldsState),{control:c,setValue:i,getValues:a}=R(),u=w({control:c,name:"fields"}),f=v.useRef(null),[x,n]=v.useState(null),r=()=>{o.map(h=>{const N=u.findIndex(l=>l.id===h.id),m=u[N];switch(x){case"duplicate":const l=ne(m);u.push(l),i("fields",u),s($({field:l}));break;case"delete":const d={...m},p=a("fields").filter(C=>C.id!==h.id);i("fields",p),s(ae({field:d}));break}}),(x==="delete"||x==="duplicate")&&s(se()),f.current.value=""};return e.jsx(A.Fragment,{children:o.length>0&&e.jsxs("div",{className:"flex-between mb-24",children:[e.jsxs("div",{children:[o.length," ",t("Selected items")]}),e.jsxs("div",{className:"i-flex-center s-8",children:[e.jsxs("select",{ref:f,className:"form-control sm",onChange:h=>{n(h.target.value!==""?h.target.value:null)},children:[e.jsx("option",{value:"",children:t("Select")}),e.jsx("option",{value:"duplicate",children:t("Duplicate")}),e.jsx("option",{value:"delete",children:t("Delete")})]}),e.jsx(D,{style:y.WHITE,size:"sm",disabled:x===null,onClick:h=>{h.preventDefault(),r()},children:t("Execute")})]})]})})},ye=({field:s,index:o})=>{const{control:c}=R(),i=w({control:c,name:`fields.${o}.name`});return e.jsx(A.Fragment,{children:e.jsxs("div",{className:"tree-el flex-between s-8",style:{"--level":0},children:[e.jsx("span",{className:"text-ellipsis cursor-pointer",onClick:a=>{a.preventDefault(),U(`${s.id}`)},children:i||s.name}),e.jsx(Ye,{style:y.SECONDARY,children:"F"})]})})};ye.propTypes={field:j.object.isRequired,index:j.number.isRequired};const Ce=({fields:s})=>{const c=document.globals.globals;return s.length===0?null:e.jsxs("div",{className:"b-rounded with-shadow bg-white p-24",children:[e.jsx("h3",{className:"mb-24 flex-between s-8",children:e.jsx("span",{className:"text-ellipsis cursor-pointer",children:t("product data fields")})}),e.jsx("div",{className:`tree ${c.is_rtl===!0?"rtl":""}`,children:s.map((i,a)=>e.jsx(ye,{index:a,field:i}))})]})};Ce.propTypes={fields:j.array.isRequired};const De=({fields:s})=>{const o=document.globals;o.settings;const c=o.globals,[i]=ie(),a=S(),{control:u}=R(),{move:f}=L({control:u,name:"fields"}),x="wp_product_data",[n,r]=v.useState(Le(x)),h=d=>{const{active:p,over:C}=d;if(p.id===C.id)return;const T=s.findIndex(b=>b.id===p.id),F=s.findIndex(b=>b.id===C.id),g=Xe(s,T,F);f(T,F),a(Me(g))},N=d=>{s&&s.map(p=>{a(le({element:p,selected:d}))})},m=()=>{const d=V();a($({field:{id:d,name:"field",type:H,isRequired:!1,description:null,defaultValue:null,options:[]}})),B(1).then(()=>{U(d)})},l=d=>{Pe(x,d),r(!n)};return e.jsxs(A.Fragment,{children:[e.jsxs("div",{className:"flex-between s-8",children:[e.jsxs("div",{className:"i-flex-center s-8",children:[e.jsx("h3",{children:t("product data fields")}),e.jsx("span",{className:"px-8 py-4 font-sm bg-light-gray text-normal b-rounded",children:s.length>0?s.length:0})]}),s.length>0&&e.jsxs("div",{className:"i-flex-center s-8 mb-24",children:[e.jsx("div",{className:"toggle-group",children:e.jsxs("label",{htmlFor:"toggle_navigation",className:"toggle",children:[e.jsx("input",{id:"toggle_navigation",type:"checkbox",checked:n,onChangeCapture:d=>{l(d.target.checked)}}),e.jsx("span",{className:"slider round"})]})}),e.jsx("label",{className:"cursor-pointer",htmlFor:"toggle_navigation",children:t(n?"Hide navigation":"Show navigation")})]})]}),e.jsx(ps,{}),s&&s.length>0?e.jsxs("div",{className:"container",children:[n&&e.jsx("div",{className:"col-3 flex-column s-24 hidden-xs sticky",style:{top:"130px"},children:e.jsx(Ce,{fields:s})}),e.jsx("div",{className:`flex-column s-24 ${n?"col-9":"col-12"}`,children:e.jsxs("div",{className:"responsive with-shadow b-rounded",children:[e.jsxs("table",{className:`acpt-table  ${c.is_rtl?"rtl":""}`,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:"10px"},children:e.jsxs("label",{className:"checkbox",htmlFor:"select-fields",style:{marginLeft:"26px"},children:[e.jsx("input",{id:"select-fields",type:"checkbox",onChange:d=>{N(d.target.checked)}}),e.jsx("span",{})]})}),e.jsx("th",{children:t("Name")}),e.jsx("th",{children:t("Type")}),e.jsx("th",{children:t("Actions")})]})}),e.jsx("tbody",{ref:i,children:e.jsx(re,{onDragEnd:h,items:s,children:s&&s.map((d,p)=>e.jsx(Ne,{field:d,index:p}))})})]}),e.jsx("div",{className:"p-24 bg-white",children:e.jsx(D,{type:"button",style:y.SECONDARY,onClick:d=>{d.preventDefault(),m()},children:t("Add field")})})]})})]}):e.jsx("div",{className:"mb-24 p-24 bg-white with-shadow",children:e.jsxs("div",{className:"b-maxi b-rounded p-24 flex-column s-12 text-center",children:[e.jsx("span",{children:t('No fields already created. Create the first one now by clicking the button "Add field"!')}),e.jsx("div",{children:e.jsx(D,{type:"button",style:y.SECONDARY,onClick:d=>{d.preventDefault(),m()},children:t("Add field")})})]})})]})};De.propTypes={fields:j.array.isRequired};const ws=({})=>{const s=S(),{loading:o}=k(l=>l.fetchProductDataFields),{fields:c}=k(l=>l.productDataFieldsState),{id:i}=Se(),[a,u]=v.useState(!1),f=Re(),[x]=ie(),n=Te({mode:"all"});v.useEffect(()=>{Ve(t("Manage product data fields")),$e("#/"),s(Ue(i)).then(l=>{s(_e(l.payload)),l.payload&&l.payload.map((d,p)=>{n.setValue(`fields.${p}`,d)})}).catch(l=>{console.error(l),u(!0)})},[]);const r=()=>{const l=V();s($({field:{id:l,name:"field",type:H,isRequired:!1,description:null,defaultValue:null,options:[]}})),B(1).then(()=>{U(l)})},h=()=>!(n.formState.errors&&n.formState.errors.pages),N=l=>{s(Ge(l)).then(d=>{const p=d.payload;p.success?(f(`/product-data/product/fields/${i}`),P.success(t("WooCommerce product data fields successfully saved"))):P.error(p.error)}).catch(d=>{P.error(d)})},m=[e.jsx(D,{style:y.SECONDARY,onClick:l=>{l.preventDefault(),r()},children:t("Add field")}),e.jsx(D,{disabled:!h(),style:y.PRIMARY,children:t("Save")}),e.jsx(Ke,{})];return o?e.jsx(Be,{}):a?e.jsx(ze,{}):e.jsx(we,{...n,children:e.jsx("form",{onSubmit:n.handleSubmit(N),children:e.jsxs(He,{title:t("Manage option pages"),actions:m,crumbs:[{label:t("Registered Custom Post Types"),link:"/"},{label:t("WooCommerce product data"),link:"/product-data/product"},{label:t("product data fields")}],children:[e.jsx(W,{register:n.register,id:"productDataId",value:i}),e.jsx("div",{ref:x,children:e.jsx(De,{fields:We(c)?[]:c})})]})})})};export{ws as default};
