import{j as e,u as t}from"./fields-B4O9Q4Yk.js";import{a as g,R as P,L as j,d as L}from"./vendor-BwziPlmK.js";import{n as p,L as T,s as F}from"./Layout-Cn7fGwLD.js";import{P as x,u as v,B as y,s as f,ag as B,ad as k,a as I,f as w,m as $,L as M,A as V,w as _}from"./index-DIgvZvNa.js";import{B as q}from"./index-oBSPYE0D.js";import{P as Y}from"./index-C-SLOP4R.js";import{w as O}from"./woocommerce_icons-DfNVjrUt.js";import{B as U}from"./index-C3CzE1pq.js";import{W as z}from"./index-DxvXr-wu.js";import{M as G}from"./index-D2c1mKCA.js";import{u as D,a as R,b as H,F as J}from"./index.esm-Czmjla35.js";import{u as K}from"./index-tMNRH81H.js";const A=({id:s,page:c,perPage:d})=>{const n=v(),[o,u]=g.useState(!1),h=()=>{n(B(s)).then(m=>{const r=m.payload;r.success?(u(!o),p.success(t("WooCommerce product data successfully deleted")),n(k({page:c||1,perPage:d}))):p.error(r.error)}).catch(m=>{p.error(m)})},i=[e.jsx(y,{style:f.DANGER,onClick:()=>{h()},children:t("Yes, delete it")}),e.jsx(y,{style:f.SECONDARY,onClick:()=>{u(!o)},children:t("Return back to list")})];return e.jsxs(P.Fragment,{children:[e.jsx(G,{title:t("Delete WooCommerce product data"),buttons:i,visible:o,children:e.jsx("div",{children:t("You are going to delete WooCommerce this product data. Are you sure?")})}),e.jsx("a",{href:"#",onClick:m=>{m.preventDefault(),u(!o)},children:t("Delete")})]})};A.propTypes={id:x.string.isRequired,page:x.number.isRequired,perPage:x.number.isRequired};const W=g.memo(({record:s,page:c,perPage:d})=>{const{register:n}=D(),o=`elements.${s.id}`;return e.jsx(P.Fragment,{children:e.jsxs("tr",{children:[e.jsx("td",{style:{width:"24px"},children:e.jsxs("label",{className:"checkbox",htmlFor:o,children:[e.jsx("input",{type:"checkbox",id:o,name:o,defaultChecked:!1,...n(o)}),e.jsx("span",{})]})}),e.jsx("td",{children:e.jsx("span",{className:`wcicon-${typeof s.icon=="object"?s.icon.icon:O[s.icon]}`,style:{color:"#777",fontSize:"18px"}})}),e.jsx("td",{children:s.name}),e.jsx("td",{children:e.jsx(U,{status:s.showInUI})}),e.jsx("td",{children:e.jsx(z,{visibility:s.visibility})}),e.jsx("td",{children:s.fields.length>0?e.jsx(j,{to:`/product-data/product/fields/${s.id}`,children:t("Manage")}):e.jsx(j,{to:`/product-data/product/fields/${s.id}`,children:t("Create")})}),e.jsx("td",{children:e.jsxs("div",{className:"i-flex-center s-8",children:[e.jsx(j,{to:`/product-data/product/view/${s.id}`,children:t("View")}),e.jsx(j,{to:`/product-data/product/edit/${s.id}`,children:t("Edit")}),e.jsx(A,{id:s.id,page:c,perPage:d})]})})]})})});W.propTypes={page:x.number,perPage:x.number,record:x.object.isRequired};const Q=()=>{const{control:s,register:c}=D(),d=R({control:s,name:"elements"}),n=()=>{let o=0;for(const[u,h]of Object.entries(d))h===!0&&o++;return o};return e.jsxs("div",{className:"flex-between s-8 mb-24",children:[e.jsxs("span",{children:[n()," ",t("Selected items")]}),e.jsxs("div",{className:"i-flex-center s-8",children:[e.jsxs("select",{name:"action",className:"form-control sm",...c("action"),children:[e.jsx("option",{value:"",children:t("Select")}),e.jsx("option",{value:"delete",children:t("Delete")})]}),e.jsx(y,{style:f.WHITE,size:"sm",children:t("Execute")})]})]})},de=({})=>{const s=document.globals,c=s.settings,[d]=K(),n=g.useRef(),o=H({mode:"all"}),u=R({control:o.control,name:"elements"}),h=v(),{data:i,loading:m}=I(a=>a.fetchWooCommerceProductData),{page:r}=L(),b=c.length>0&&w(c,"key","records_per_page")!==""?w(c,"key","records_per_page").value:20,C=Math.ceil(i.count/b);g.useEffect(()=>{$(t("WooCommerce product data")),h(k({page:r||1,perPage:b}))},[r]);const N=[e.jsx(q,{to:"/product-data/product/add",style:f.PRIMARY,children:t("Add product data")})],E=()=>{if(!u)return!1;for(const[a,l]of Object.entries(u))if(l===!0)return!0;return!1},S=a=>{o.reset(),a.belongsTo="woo_product_data",_("bulkActionsAction",a).then(l=>{if(l.success===!0)switch(a.action){case"delete":p.success(t("WooCommerce product data successfully deleted")),o.resetField("elements"),F(),h(k({page:r||1,perPage:b}));break}else p.error(l.error)}).catch(l=>{console.error(l),p.error(t("Unknown error, please retry later"))})};return m?e.jsx(M,{}):e.jsx(J,{...o,children:e.jsx("form",{onSubmit:o.handleSubmit(S),children:e.jsxs(T,{title:t("WooCommerce product data"),actions:N,crumbs:[{label:t("Registered Custom Post Types"),link:"/"},{label:t("WooCommerce product data")}],children:[e.jsx("div",{ref:d,children:E()&&e.jsx(Q,{})}),i.records&&i.records.length>0?e.jsx("div",{className:"responsive",children:e.jsxs("table",{className:`acpt-table with-shadow ${s.is_rtl?"rtl":""}`,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:"24px"},children:e.jsxs("label",{className:"checkbox",htmlFor:"all",children:[e.jsx("input",{ref:n,type:"checkbox",id:"all",defaultChecked:!1,onClick:a=>{i.records.map(l=>{o.setValue(`elements.${l.id}`,a.currentTarget.checked)})}}),e.jsx("span",{})]})}),e.jsx("th",{}),e.jsx("th",{children:t("Name")}),e.jsx("th",{children:t("Show on UI")}),e.jsx("th",{children:t("Visibility")}),e.jsx("th",{children:t("Fields")}),e.jsx("th",{children:t("Actions")})]})}),e.jsx("tbody",{children:i.records&&i.records.map(a=>e.jsx(W,{record:a,page:r||1,perPage:b},a.id))}),C>1&&e.jsx("tfoot",{children:e.jsx("tr",{children:e.jsx("td",{colSpan:7,children:e.jsx(Y,{currentPage:r?parseInt(r):1,totalPages:C,baseLink:"/product-data/product"})})})})]})}):e.jsxs(V,{style:f.SECONDARY,children:[t("No product data found.")," ",e.jsx(j,{to:"/product-data/product/add",children:t("Register the first one")}),"!"]})]})})})};export{de as default};
