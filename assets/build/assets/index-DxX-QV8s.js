import{j as e,u as t}from"./fields-PF-HBT_1.js";import{a as _}from"./vendor-Bd2ZL6QG.js";import{n as x,f as B,s as O,L as Y}from"./Layout-Dmz1SQGO.js";import{P as n,B as R,s as v,w as G,b as N,u as U,m as z,k as Q,aA as u,r as Z,aB as H}from"./index-BeA13JTg.js";import{u as f,a as J,F as K}from"./index.esm-VK9FF9DZ.js";import{T as W,a as h}from"./index-BBTKUrXA.js";import{C as m,a as r}from"./CardRow-BkrD5SFj.js";import{S as V}from"./Select-Dxy14IhC.js";import{I as X}from"./Input-DvGo9_fW.js";import{T as p}from"./Toggle-DxNK5oxA.js";const $=[{label:"Default",value:"Default"},{label:"Inter",value:"Inter"},{label:"Lato",value:"Lato"},{label:"Open Sans",value:"Open Sans"},{label:"Poppins",value:"Poppins"},{label:"Roboto",value:"Roboto"},{label:"Ubuntu",value:"Ubuntu"}],F=({language:o,font:c,records_per_page:i})=>{const l=document.globals,{register:a,formState:{errors:b}}=f();return e.jsxs(m,{children:[e.jsx(r,{label:t("Language"),value:e.jsx(V,{id:"language",label:t("Language"),placeholder:t("Set the language of the plug-in"),description:t("Set the language of the plug-in"),register:a,defaultValue:o,values:l.globals.available_languages,isRequired:!0,errors:b,validate:{required:"This field is mandatory"}})}),e.jsx(r,{label:t("Font"),value:e.jsx(V,{id:"font",label:t("Font"),placeholder:t("Set the font of the plug-in"),description:t("Set the font of the plug-in"),register:a,defaultValue:c,values:$,isRequired:!0,errors:b,validate:{required:"This field is mandatory"}})}),e.jsx(r,{label:t("Records per page"),value:e.jsx(X,{type:"number",id:"records_per_page",description:t("Set the number of records per page in your ACPT dashboards."),register:a,errors:b,isRequired:!0,defaultValue:i,min:1,max:200,validate:{required:"This field is mandatory"}})})]})};F.propTypes={language:n.string,font:n.string,records_per_page:n.number};const L=({enable_cpt:o,enable_tax:c,enable_meta:i})=>{const{register:l,formState:{errors:a}}=f();return e.jsxs(m,{children:[e.jsx(r,{label:t("Enable custom post types"),value:e.jsx(p,{id:"enable_cpt",description:t("Enable the custom post types manager."),register:l,errors:a,defaultValue:o})}),e.jsx(r,{label:t("Enable taxonomies"),value:e.jsx(p,{id:"enable_tax",description:t("Enable the taxonomies manager."),register:l,errors:a,defaultValue:c})}),e.jsx(r,{label:t("Enable meta fields"),value:e.jsx(p,{id:"enable_meta",description:t("Enable the meta fields manager."),register:l,errors:a,defaultValue:i})})]})};L.propTypes={enable_cpt:n.bool,enable_tax:n.bool,enable_op:n.bool,enable_meta:n.bool,enable_forms:n.bool};const q=({enable_cache:o})=>{const{register:c,formState:{errors:i}}=f(),l=()=>{G("flushCacheAction",{}).then(a=>{a.success===!0?x.success(t("Cache was successfully flushed")):x.error(a.error)}).catch(a=>console.error(a))};return e.jsxs(m,{children:[e.jsx(r,{label:t("Enable ACPT cache"),value:e.jsx(p,{id:"enable_cache",description:t("Enable the ACPT cache. The cache stores the MySQL results in simple textual files to avoid useless DB calls."),register:c,errors:i,defaultValue:o})}),o?e.jsx(r,{label:t("Flush the ACPT cache"),value:e.jsx(R,{style:v.SECONDARY,onClick:a=>{a.preventDefault(),l()},children:t("Flush cache")})}):null]})};q.propTypes={enable_cache:n.bool};const I=({delete_tables_when_deactivate:o,delete_posts:c,delete_metadata:i})=>{const{register:l,formState:{errors:a}}=f();return e.jsxs(m,{children:[e.jsx(r,{label:t("Delete ACPT definitions when deactivate the plug-in"),value:e.jsx(p,{id:"delete_tables_when_deactivate",description:t("Delete all saved ACPT definitions when you deactivate the plug-in. This means that if you select NO when you deactivate and then reactivate the plug-in you will find all the previously saved ACPT definitions (meta fields, options etc.)"),register:l,errors:a,defaultValue:o})}),e.jsx(r,{label:t("Delete posts when delete an ACPT post definition"),value:e.jsx(p,{id:"delete_posts",description:t("   Delete posts when delete an ACPT post type definition. This means that if you select YES, when you delete an ACPT post type definition all the saved posts will be deleted"),register:l,errors:a,defaultValue:c})}),e.jsx(r,{label:t("Delete metadata when delete an ACPT field"),value:e.jsx(p,{id:"delete_metadata",description:t("Delete post metadata when deleting an ACPT field. This means that if you select YES, when you delete an ACPT meta field all the saved metadata will be deleted"),register:l,errors:a,defaultValue:i})})]})};I.propTypes={delete_tables_when_deactivate:n.bool,delete_posts:n.bool,delete_metadata:n.bool};const ce=()=>{const{error:o,success:c,loading:i}=N(s=>s.saveSettings),l=U(),[a,b]=_.useState(!1);_.useEffect(()=>{z(t("Settings page")),Q("#/settings"),B()},[]);const d=document.globals.settings,j=u("delete_metadata",d,0),S=u("delete_posts",d,0),T=u("delete_tables_when_deactivate",d,0),y=u("enable_cache",d,1),C=u("enable_cpt",d,1),w=u("enable_tax",d,1),P=u("enable_meta",d,1),A=u("font",d,"Inter"),E=u("language",d,"en_US"),D=u("records_per_page",d,20),g=J({mode:"all",defaultValues:{enable_cache:y,enable_cpt:C,enable_tax:w,enable_meta:P,delete_metadata:j,delete_posts:S,delete_tables_when_deactivate:T,records_per_page:D,language:E,font:A}}),M=s=>{l(H({records_per_page:s.records_per_page,enable_cache:s.enable_cache?1:0,enable_cpt:s.enable_cpt?1:0,enable_tax:s.enable_tax?1:0,enable_meta:s.enable_meta?1:0,delete_tables_when_deactivate:s.delete_tables_when_deactivate?1:0,delete_posts:s.delete_posts?1:0,delete_metadata:s.delete_metadata?1:0,language:s.language?s.language:null,font:s.font?s.font:null})),b(!0)};_.useEffect(()=>{a&&c&&(O("Settings saved."),Z()),a&&o!==null&&x.error(o),a&&b(!1)},[i]);const k=[e.jsx(R,{testId:"save-settings",style:v.PRIMARY,disabled:!!(!g.formState.isValid||i),children:i?t("Loading..."):t("Save")})];return e.jsx(K,{...g,children:e.jsx("form",{onSubmit:g.handleSubmit(M),children:e.jsx(Y,{crumbs:[{label:t("Settings")}],title:t("Settings"),actions:k,children:e.jsxs(W,{halfMargin:!0,children:[e.jsx(h,{title:t("General settings"),children:e.jsx(F,{font:A,language:E,records_per_page:D})}),e.jsx(h,{title:t("Content settings"),children:e.jsx(L,{enable_cpt:C,enable_meta:P,enable_tax:w})}),e.jsx(h,{title:t("Performances"),children:e.jsx(q,{enable_cache:y})}),e.jsx(h,{style:v.DANGER,title:t("Danger zone"),children:e.jsx(I,{delete_tables_when_deactivate:T,delete_posts:S,delete_metadata:j})})]})})})})};export{ce as default};
